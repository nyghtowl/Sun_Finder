<!-- Map View -->

<div id="mapModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
        <h5 id="myModalLabel">Map View</h5>
    </div>

    <form action="" method="POST" name="map_view">
        <div class="modal-body">
			<div class="span7" id="map_canvas"></div>
        </div>
    
        <div class="modal-footer control-group">
            <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
        </div>

    </form>

</div>


<script>

    // Initialize map
    function dom_ready() {
        console.log('entered modal load');

        $('.open_map').on('click', function(e) { 
            var map_lat = 37.7655
            var map_long = -122.4429

            var locations = JSON.parse({{ map_markers }}) // FIX pull locations into dict  in views
            console.log(locations);

            alert('How goes it');
            // Locations for map
            // var availableTags = [ 
            //  {% for location in locations %}
            //      "{{ location.n_hood|safe }}", 
            //  {% endfor %} 
            //  ];


            // var locations = JSON.parse(data)
            // // Coordinates to generate map
            // var positionCoords = [
            //  {% for coord in locations %}
            //      new google.maps.LatLng({{ coord.lat}}, {{ coord.lng }}),
            //  {% endfor %}
            //  ];

            // initialize();
        });

        $(function() { 
            if(map_lat && map_long){
                initialize();
            };
        })

    }

</script>